(this.webpackJsonpdashboard=this.webpackJsonpdashboard||[]).push([[0],{218:function(e,a,t){e.exports=t(394)},394:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(26),c=t.n(l),o=(t(223),t(40)),i=t.n(o),s=t(54),u=t(99),m=t(182),d=t(41),p={teacher:null},f=Object(u.c)({rootStore:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SET_TEACHER":return Object(d.a)(Object(d.a)({},e),{},{teacher:a.payload});case"RESET":return Object(d.a)(Object(d.a)({},p),{},{teacher:p.teacher});default:return e}}}),g=Object(u.d)(f,Object(u.a)(m.a)),h=t(70),E=t(35),b=t(395),v=t(183),y=t(406),j=t(91),O=t.n(j),x=function(e){return{type:"SET_TEACHER",payload:e}},k=r.a.createElement(y.a,{style:{fontSize:"10vh"},spin:!0}),w=function(){var e=Object(E.f)(),a=Object(s.b)();return Object(n.useEffect)((function(){var t=localStorage.getItem("teacher-token");if(t){var n=O()(t);a(x(n)),i.a.defaults.headers.common.Authorization="Bearer ".concat(t||""),e.push("/add-notice")}else e.push("auth")}),[]),r.a.createElement(b.a,{style:{height:"100vh"},align:"middle",justify:"center"},r.a.createElement(v.a,{indicator:k}))},T=function(){var e=Object(s.b)(),a=localStorage.getItem("teacher-token");i.a.defaults.headers.common.Authorization="Bearer ".concat(a||""),Object(n.useEffect)((function(){if(a){var t=O()(a);e(x(t))}}),[])},I=t(52),S=t.n(I),C=t(77),N=t(63),D=t(405),A=t(407),R=t(399),F=t(398),P=t(396),L=t(48),B=t(185),q=t.n(B),z=t(93),V=t.n(z),M=t(400),_=t(408),J=t(403),U=function(e){var a=e.form,t=e.onFinish,n=e.loading;return r.a.createElement(F.a,{labelAlign:"left",name:"basic",initialValues:{remember:!0},form:a,onFinish:t},r.a.createElement(F.a.Item,{name:"email",rules:[{required:!0,message:"Please input your email!"}]},r.a.createElement(M.a,{placeholder:"Enter your email address",prefix:r.a.createElement(_.a,null)})),r.a.createElement(F.a.Item,{name:"password",rules:[{required:!0,message:"Please input your password!"}]},r.a.createElement(M.a.Password,{placeholder:"Enter your password",prefix:r.a.createElement(J.a,null)})),r.a.createElement(b.a,{justify:"start"},r.a.createElement(F.a.Item,null,r.a.createElement(L.a,{type:"primary",htmlType:"submit",loading:n},"Submit"))))},Y=t(110),H=(Y.a.Option,function(e){var a=e.form,t=e.onFinish,n=e.loading;return r.a.createElement(F.a,{labelAlign:"left",name:"basic",initialValues:{remember:!0},form:a,onFinish:t},r.a.createElement(b.a,null,r.a.createElement(P.a,{span:11},r.a.createElement(F.a.Item,{name:"fName",rules:[{required:!0,message:"This field is mandatary!"}]},r.a.createElement(M.a,{placeholder:"First Name"}))),r.a.createElement(P.a,{span:13},r.a.createElement(F.a.Item,{name:"lName",rules:[{required:!0,message:"This field is mandatary!"}],style:{marginLeft:20}},r.a.createElement(M.a,{placeholder:"Last Name"})))),r.a.createElement(b.a,null,r.a.createElement(P.a,{span:11},r.a.createElement(F.a.Item,{name:"regId",rules:[{required:!0,message:"This field is mandatary!"}]},r.a.createElement(M.a,{placeholder:"Registration ID"}))),r.a.createElement(P.a,{span:13},r.a.createElement(F.a.Item,{name:"email",rules:[{required:!0,message:"This field is mandatary!"}],style:{marginLeft:20}},r.a.createElement(M.a,{placeholder:"Email ID"})))),r.a.createElement(b.a,{justify:"space-between"},r.a.createElement(P.a,{span:11},r.a.createElement(F.a.Item,{name:"password",rules:[{required:!0,message:"Please input your password!"}],hasFeedback:!0},r.a.createElement(M.a.Password,{placeholder:"Enter password"}))),r.a.createElement(P.a,{span:12},r.a.createElement(F.a.Item,{name:"confirm",dependencies:["password"],hasFeedback:!0,rules:[{required:!0,message:"Please confirm your password!"},function(e){var a=e.getFieldValue;return{validator:function(e,t){return t&&a("password")!==t?Promise.reject("The two passwords that you entered do not match!"):Promise.resolve()}}}]},r.a.createElement(M.a.Password,{placeholder:"Verify password"})))),r.a.createElement(b.a,{justify:"start"},r.a.createElement(F.a.Item,null,r.a.createElement(L.a,{type:"primary",htmlType:"submit",loading:n},"Submit"))))}),W=R.a.Title,G=R.a.Text,$=function(){var e=F.a.useForm(),a=Object(N.a)(e,1)[0],t=Object(E.f)(),l=Object(n.useState)(!1),c=Object(N.a)(l,2),o=c[0],u=c[1],m=Object(s.b)(),p=Object(n.useState)(!1),f=Object(N.a)(p,2),g=f[0],h=f[1],v=function(){var e=Object(C.a)(S.a.mark((function e(t){var n,r,l;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),n=Object(d.a)(Object(d.a)({},t),{},{tags:[],role:"teacher"}),e.prev=2,e.next=5,i.a.post("auth/signupTeacher",n);case 5:e.sent.data&&(alert("Activation Link sent your mail"),a.resetFields(),h(!1)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),401===(null===(r=e.t0.response)||void 0===r?void 0:r.status)?alert(null===(l=e.t0.response)||void 0===l?void 0:l.data):alert("Error occured");case 12:u(!1);case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(a){return e.apply(this,arguments)}}();return r.a.createElement(b.a,{justify:"center",align:"middle",style:{height:"100vh",backgroundImage:"url(".concat(V.a,")")}},r.a.createElement(W,{level:4,style:{marginTop:"20px",position:"absolute",top:0,color:"#fff"}},"PICT EAN"," ",r.a.createElement(G,{style:{fontSize:"12px",color:"#f8f8f8"}},"Teacher Dashboard")),r.a.createElement(P.a,{span:8,style:{backgroundColor:"#fff",padding:"0px 32px",paddingTop:"12px",borderRadius:"16px"}},r.a.createElement(b.a,{style:{marginBottom:32,marginTop:8}},r.a.createElement(L.a,{type:g?"default":"primary",ghost:!g,icon:r.a.createElement(D.a,null),onClick:function(){return h(!1)},style:{borderRadius:4,marginRight:16}},"Login"),r.a.createElement(L.a,{ghost:g,type:g?"primary":"default",icon:r.a.createElement(A.a,null),onClick:function(){return h(!0)},style:{borderRadius:4}},"Register")),g?r.a.createElement(H,{form:a,onFinish:v,loading:o}):r.a.createElement(U,{form:a,onFinish:function(e){u(!0),Object(C.a)(S.a.mark((function a(){var n,r,l,c;return S.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,i.a.post("auth/login",q.a.stringify(Object(d.a)(Object(d.a)({},e),{},{loginType:"teacher"})),{headers:{"Content-Type":"application/x-www-form-urlencoded"}});case 3:n=a.sent,r=n.data.access_token,localStorage.setItem("teacher-token",r),l=O()(r),m(x(l)),i.a.defaults.headers.common.Authorization="Bearer ".concat(r),t.replace("/add-notice"),a.next=17;break;case 12:a.prev=12,a.t0=a.catch(0),console.log(null===a.t0||void 0===a.t0?void 0:a.t0.response),u(!1),alert(null===a.t0||void 0===a.t0||null===(c=a.t0.response)||void 0===c?void 0:c.data);case 17:case"end":return a.stop()}}),a,null,[[0,12]])})))()},loading:o})))},K=function(){var e=Object(E.f)();return r.a.createElement(L.a,{danger:!0,onClick:function(){localStorage.removeItem("teacher-token"),e.push("/auth")},style:{marginRight:24,marginLeft:24}},"Logout")},Q=R.a.Title,X={header:{backgroundColor:"rgba(255, 255, 255, 0.8)",borderBottom:"1px solid #ddd",padding:"20px 30px"},link:{fontSize:18,marginRight:24,marginLeft:24}},Z=function(){var e=Object(E.f)(),a=["#416ce1","#000"],t="/add-notice"===e.location.pathname?a:a.reverse(),n=Object(N.a)(t,2),l=n[0],c=n[1];return r.a.createElement(b.a,{style:X.header,align:"middle"},r.a.createElement(Q,{style:{margin:0,color:"#404a57"},level:2},"Teacher Dashboard"),r.a.createElement(L.a,{type:"link",style:Object(d.a)(Object(d.a)({},X.link),{},{color:l}),onClick:function(){return e.replace("add-notice")}},"Add Notice"),r.a.createElement(L.a,{type:"link",style:Object(d.a)(Object(d.a)({},X.link),{},{color:c,marginRight:"auto",marginLeft:0}),onClick:function(){return e.replace("notices")}},"Past Notices"),r.a.createElement(K,null))},ee=t(131),ae=function(e){var a=new FormData;return Object.entries(e).map((function(e){a.append(e[0],e[1])})),a},te=Y.a.Option,ne={labelCol:{span:3},wrapperCol:{span:19}},re=function(){var e=Object(E.f)(),a=Object(s.c)((function(e){var a,t=e.rootStore;return{allTags:null===(a=t.teacher)||void 0===a?void 0:a.tags,teacher:t.teacher}})),t=a.allTags,l=a.teacher,c=Object(n.useState)(),o=Object(N.a)(c,2),u=o[0],m=o[1],p=r.a.createRef(),f=function(){var e;null===(e=p.current)||void 0===e||e.resetFields(),m(null)},g=function(){var a=Object(C.a)(S.a.mark((function a(n){var r,c;return S.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=n.tags.map((function(e){return null===t||void 0===t?void 0:t[e]})),c=Object(d.a)(Object(d.a)({},n),{},{tags:JSON.stringify(r),teacher:JSON.stringify({_id:null===l||void 0===l?void 0:l.teacherId,name:"".concat(null===l||void 0===l?void 0:l.fName," ").concat(null===l||void 0===l?void 0:l.lName)}),file:u}),a.prev=2,a.next=5,i.a.post("notice/addnotices",ae(Object(d.a)({},c)),{headers:{"Content-Type":"multipart/form-data"}});case 5:a.sent.data?(f(),alert("Notice Uploaded"),e.push("notices")):f(),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(2),f();case 12:case"end":return a.stop()}}),a,null,[[2,9]])})));return function(e){return a.apply(this,arguments)}}();return r.a.createElement(P.a,{span:24,style:{backgroundColor:"#fff"}},r.a.createElement(F.a,{labelAlign:"left",ref:p,style:{flexDirection:"row",display:"flex",justifyContent:"space-around",padding:"32px"},name:"basic",initialValues:{type:"notice"},onFinish:g},r.a.createElement(P.a,{span:12},r.a.createElement(F.a.Item,Object.assign({},ne,{labelAlign:"left",name:"title",label:"Title",rules:[{required:!0,message:"Please add Title!"}]}),r.a.createElement(M.a,null)),r.a.createElement(F.a.Item,Object.assign({label:"Body",name:"body"},ne),r.a.createElement(M.a.TextArea,{rows:15})),r.a.createElement(F.a.Item,Object.assign({label:"Attachment",name:"file"},ne),r.a.createElement(M.a,{type:"file",name:"file",onChange:function(e){var a;m((null===(a=e.target.files)||void 0===a?void 0:a[0])||null)}}))),r.a.createElement(P.a,{span:12},r.a.createElement(F.a.Item,{labelCol:{span:5},label:"Select Tags",name:"tags",rules:[{required:!0,message:"Please add tags!"}]},r.a.createElement(Y.a,{mode:"multiple",size:"middle",showArrow:!0,filterOption:function(e,a){return null===a||void 0===a?void 0:a.children.includes(e)}},null===t||void 0===t?void 0:t.map((function(e,a){return r.a.createElement(te,{key:e.tagName,value:a},e.verboseName)})))),r.a.createElement(F.a.Item,{labelCol:{span:5},label:"Expiration Date",name:"validDate",rules:[{required:!0,message:"Please add expiration date!"}]},r.a.createElement(M.a,{type:"date"})),r.a.createElement(F.a.Item,{label:"Notice Type",name:"type",labelCol:{span:5}},r.a.createElement(ee.default.Group,{defaultValue:"notice"},r.a.createElement(ee.default.Button,{value:"notice"},"Notice"),r.a.createElement(ee.default.Button,{value:"exam"},"Exam"),r.a.createElement(ee.default.Button,{value:"assignment"},"Assignment"))),r.a.createElement(L.a,{type:"primary",htmlType:"submit"},"Upload Notice"))))},le=function(){return r.a.createElement("div",{style:{height:"100%",backgroundImage:"url(".concat(V.a,")")}},r.a.createElement(Z,null),r.a.createElement(re,null))},ce=t(404),oe=t(401),ie=t(402),se=t(397),ue=t(154),me=t.n(ue),de=R.a.Text,pe={header:{backgroundColor:"#ffffff90",borderBottom:"1px solid #ddd",paddingLeft:30,paddingRight:30},table:{border:"1px solid #ddd",margin:"16px",backgroundColor:"#fff",padding:"8px",borderRadius:"8px"}},fe=function(){var e=Object(n.useState)({listData:[],loading:!0}),a=Object(N.a)(e,2),t=a[0],l=t.listData,c=t.loading,o=a[1];Object(n.useEffect)((function(){Object(C.a)(S.a.mark((function e(){var a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.a.get("notice/getnotices");case 3:a=e.sent,console.log(a,"data"),o({listData:a.data,loading:!1}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()}),[]);var s=function(){var e=Object(C.a)(S.a.mark((function e(a){var t,n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.a.post("notice/delete",{noticeId:a});case 3:t=e.sent,n=t.data,o({listData:n,loading:!1}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(a){return e.apply(this,arguments)}}(),u=[{title:"Title",dataIndex:"title"},{title:"Upload Date",dataIndex:"date",render:function(e){return r.a.createElement(de,null,me()(e).format("DD/MM/YY LT"))}},{title:"Expiry Date",dataIndex:"validDate",render:function(e){return r.a.createElement(de,null,me()(e).format("DD/MM/YY LT"))}},{title:"Tags",dataIndex:"tags",render:function(e){return r.a.createElement(r.a.Fragment,null,null===e||void 0===e?void 0:e.map((function(e){return r.a.createElement(oe.a,{color:"geekblue",key:e.tagName},e.verboseName)})))}},{title:"Action",render:function(e,a){return r.a.createElement(ie.a,{title:"Sure to delete?",onConfirm:function(){return s(a._id)}},r.a.createElement(ce.a,{style:{color:"red"}}))}}];return r.a.createElement("div",{style:{height:"100vh",backgroundImage:"url(".concat(V.a,")")}},r.a.createElement(Z,null),r.a.createElement(P.a,{span:24,style:{display:"flex",justifyContent:"center",alignItems:"center"}},r.a.createElement(P.a,{span:24,style:{padding:30}},r.a.createElement(se.a,{loading:c,pagination:{pageSize:6},columns:u,dataSource:l,style:pe.table}))))},ge=Object(E.g)((function(e){var a=e.history,t=Object(s.c)((function(e){return e.rootStore.teacher}));return function(e,a){var t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=Object(n.useRef)(!1);Object(n.useEffect)((function(){t?r.current?e():r.current=!0:e()}),a)}((function(){t||(localStorage.removeItem("teacher-token"),i.a.defaults.headers.common.Authorization="",alert("Session expired, Log In again to continue"),a.replace("auth"))}),[t]),r.a.createElement(r.a.Fragment,null)}));i.a.defaults.baseURL="http://139.59.3.160/api/";var he=function(){return T(),r.a.createElement(h.a,{basename:"/dashboard"},r.a.createElement(ge,null),r.a.createElement(E.c,null,r.a.createElement(E.a,{exact:!0,path:"/"},r.a.createElement(w,null)),r.a.createElement(E.a,{exact:!0,path:"/notices"},r.a.createElement(fe,null)),r.a.createElement(E.a,{exact:!0,path:"/auth"},r.a.createElement($,null)),r.a.createElement(E.a,{exact:!0,path:"/add-notice"},r.a.createElement(le,null))))};i.a.interceptors.response.use((function(e){return e}),(function(e){var a=g.dispatch;if(e.response){var t=e.response.status;403===t&&a({type:"RESET"}),500===t&&alert("Server Error")}else alert("Server or Network Error");return Promise.reject(e)}));var Ee=function(){return r.a.createElement(s.a,{store:g},r.a.createElement(he,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Ee,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},93:function(e,a,t){e.exports=t.p+"static/media/background.35ebe6ad.png"}},[[218,1,2]]]);
//# sourceMappingURL=main.ac0755b6.chunk.js.map